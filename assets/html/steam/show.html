<p> <?php Page::a('Retour', 'utilisateur/menu'); ?> -
    <?php Page::a('AddServ', 'steam/add'); ?> -
    <?php Page::a('Refresh', 'steam/show'); ?> </p>

<table>
    <tr>
        <th><?php L::eT('IP'); ?></th>
        <th><?php L::eT('Port'); ?></th>
        <th><?php L::eT('Jeu'); ?></th>
        <th><?php L::eT('Dir'); ?></th>
        <th><?php L::eT('Status'); ?></th>
        <th><?php L::eT('Actions'); ?></th>
    </tr>

    <?php foreach ($serveurs AS $serveur) {
        $etat = $serveur->getQuery()->isOnline(); 
        $sid = $serveur->id; ?>
        <tr>
            <td><?php echo $serveur->Vm->ip; ?></td>
            <td><?php echo $serveur->port; ?></td>
            <td><?php echo $serveur->Jeu->nomJeu; ?></td>
            <td><?php echo $serveur->dir; ?></td>
            <td><?php echo ($etat) ? 'Allumé' : 'Eteint'; ?></td>
            <td><?php Page::anchor('Modifier', 'steam/edit', $sid); echo ' - ';
                Page::anchor('Supprimer', 'steam/del', $sid); echo '<br />';

                if ($etat) {
                    Page::anchor('Eteindre', 'steam/stop', $serveur->id); echo ' - ';
                    Page::anchor('Redémarrer', 'steam/restart', $sid); echo '<br />';
                } else {
                    Page::anchor('Allumer', 'steam/start', $sid); echo '<br />';
                }
                
                Page::anchor('Regen config', 'steam/regen', $sid); echo ' - ';
                Page::anchor('Modif CFG', 'steam/cfg', $sid); echo '<br />';
                
                if (!$serveur->Jeu->source) {
                    Page::anchor('Metamod', 'steam/plugins/mm', $sid); echo ' - ';
                    Page::anchor('AMX', 'steam/plugins/amx', $sid); echo ' - ';
                    Page::anchor('AMXX', 'steam/plugins/amxx', $sid);
                }
                else {
                    Page::anchor('Metamod: Source', 'steam/plugins/mmsrc', $sid); echo ' - ';
                    Page::anchor('SourceMod', 'steam/plugins/srcm', $sid); echo ' - ';
                    Page::anchor('EventScripts', 'steam/plugins/es', $sid);
                }
            ?></td>
        </tr>
    <?php } ?>
</table>