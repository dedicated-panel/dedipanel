{% extends 'DPAdminGameBundle:CRUD:index.html.twig' %}

{% block title %}
    {{ 'game_admin.list'|trans }}
{% endblock %}

{% block body -%}
    <h2>{{ 'game_admin.list'|trans }}</h2>
    
    <ul id="top-nav" class="nav nav-tabs">
        <li>
            <a href="{{ path(baseRoute ~ '_admin_new') }}">
                {{ 'game_admin.add'|trans }}
            </a>
        </li>
    </ul>
    
    {% for notice_level in ['success','error','info', 'warning'] %}
        {% set session_var = 'dp_flash_' ~ notice_level %}
        {% for flash in app.session.flashbag.get(session_var) %}
            <div class="alert {{ 'alert-' ~ notice_level }}">
                {{ flash|trans }}
            </div>
        {% endfor %}
    {% endfor %}
    
    <form action="{{ path(baseRoute ~ '_admin_batch_delete') }}" method="post">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />
        
        <table class="table table-bordered table-striped records_list">
            <thead>
                <tr>
                    <th><input type="checkbox" id="batch_all" /></th>
                    <th>{{ 'game_admin.fields.name'|trans }}</th>
                    <th>{{ 'game_admin.fields.launchName'|trans }}</th>
                    <th>{{ 'game_admin.fields.type'|trans }}</th>
                    <th>{{ 'game_admin.fields.bin'|trans }}</th>
                    <th>{{ 'game_admin.fields.map'|trans }}</th>
                    <th>{{ 'game_admin.fields.available'|trans }}</th>
                </tr>
            </thead>
            <tbody>
            {% for entity in entities %}
                <tr>
                    <td><input type="checkbox" name="idx[]" value="{{ entity.id }}" /></td>
                    <td><a href="{{ path(baseRoute ~ '_admin_edit', { 'id': entity.id }) }}">{{ entity.name }}</a></td>
                    <td>{{ entity.launchName }}</td>
                    <td>{{ entity.type }}</td>
                    <td>{{ entity.bin }}</td>
                    <td>{{ entity.map }}</td>
                    <td>
                        {% if entity.available == true %}
                            <i class="icon-ok-circle"></i> 
                            {{ 'admin.yes'|trans }}
                        {% else %}
                            <i class="icon-ban-circle"></i>
                            {{ 'admin.no'|trans }}
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="7">
                        <div class="form-inline">
                            <select name="action">
                                <option name="delete">{{ 'admin.delete'|trans }}</option>
                            </select>
                            
                            <input type="submit" value="OK" class="btn btn-primary btn-small" />
                        </div>
                    </th>
                </tr>
            </tfoot>
        </table>
    </form>
{% endblock %}
